<!DOCTYPE html>
<html lang="en">

<head>
    <title>Random Quote Generator</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link href="css/style.css" rel="stylesheet">-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <h1>Welcome to Matthew McGuff's Random Quote Generator</h1>

    <div class="quote">
        <blockquote>This is placeholder text.</blockquote>
    </div>

    <button id="getQuote" class="btn btn-primary">
        Get Quote
    </button>

    <button id="tweet-quote" class="btn btn-primary">
        Tweet
    </button>

</body>
<script>
    $(document).ready(function () {
          var currentQuote, currentAuthor = '';
        function openURL(url){
            window.open(url, 'Share', 'width=550, height=400, toolbar=0, scrollbars=1 ,location=0 ,statusbar=0,menubar=0, resizable=0');
        }

        $("#getQuote").on("click", function () {
            var randomNumber = Math.floor(Math.random() * 42);//Appears there is only 42 quotes from my experinmentation  
            var url = "http://quotesondesign.com/wp-json/posts?filter[orderby]=rand&filter[posts_per_page]=" + randomNumber + "&callback=";
          
            $.getJSON(url, function (a) {
                $(".quote").html("<blockquote>" + a[0].content + "</br>" + "<p>— " + a[0].title + "</p>" + "</blockquote>")
                currentQuote = a[0].content;
                currentQuote = currentQuote.replace(/(<([^>]+)>)/ig,"");
                currentQuote = currentQuote.replace(/[’]/ig,"'");

                currentAuthor = a[0].title;
                currentAuthor = currentAuthor.replace(/(<([^>]+)>)/ig,"");
                currentAuthor = currentAuthor.replace(/[’]/ig,"'");

            });

        });
        $('#tweet-quote').on('click', function() {
    
      openURL('https://twitter.com/intent/tweet?hashtags=quotes&related=freecodecamp&text=' + '"' + encodeURIComponent(currentQuote) + '"' + encodeURIComponent(currentAuthor));
    
  });


    });

</script>




</html>